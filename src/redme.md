# Голосование - выбор ресторана для обеда

Дипломный проект по курсу TopJava

#### Реализовано:
- ресторан победитель сегодня(результат голосования) http://localhost:8080/user/votes/winner
- список ресторанов с предложенным на сегодня меню http://localhost:8080/user/restaurants/menu_today

#### Функционал в разработке:
- Добавление блюд
- Добавление ресторанов
- Голосование
- Разделение прав доступа (пользователь, юзер) - базовая аутентификация
- Валидация - наличие ресторана в списке предложенных сегодня
- Обработать кейсы "ни кто не проголосовал/нет меню на сегодня" - выбрасывание ошибки(?), логирование
- Возврат результатов "голос принят"/"нельзя голосовать повторно"
- тесты
- свагер
- транзакции
- n+1 несмотря на нативный запрос Hibernate делает n+1 запрос
- валидация в jakarta

## Техническая часть

#### Стек технологий
- java 17
- spring-boot 3.0.0
- spring-data-jpa
- spring-test
- spring-security
- H2
- junit, lombok, jackson

#### Описание

Простое **CRUD** приложение 

Администратор может:
- добавить новый ресторан
- ежедневно должен добавлять блюда предложенные на обед

Пользователи могут:
- просмотреть предложенные на сегодня меню ресторанов
- просмотреть ресторан - победитель(по состоянию на момент запроса)
- проголосовать за понравившийся ресторан. Голос принимается в течении суток. Но переголосовать пользователь может только до 11:00. После этого результат голосования конкретного пользователя фиксируется

#### Как запустить у себя (на примере Intellij IDEA)
    ПО - git, JDK17, IntelliJ IDEA, Maven
- Клонировать проекта (https://github.com/k-tropy/topjavadiploma)
- Открыть проект в IntelliJ IDEA
- Затянуть зависимости Maven
- Собрать проект
- Можно запускать(shift + f10)

!!!ВНИМАНИЕ!!!
Используется встроенная БД H2. Схема БД генерируется и наполняется данными при каждом запуске. При этом датой и временем последнего голосования пользователей является момент запуска приложения. Для проверки функционала голосования необходимо удалить голоса из скрипта заполнения данных/запускать до 11:00 - тогда система даст переголосовать/
